<!DOCTYPE html>
<html>
	<head>
		<title>Student Payment Details</title>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="https://cdn.datatables.net/2.3.6/css/dataTables.dataTables.css" />
	</head>

	<body class="bg-light">
		<%-include('../partials/parentNavbar') %>
		<div class="container py-5">
			<div class="card shadow-sm border-0">
				<div class="card-body">
					<div class="text-center mb-4">
						<h3 class="fw-bold fs-2" style="color: #870216">PAYMENT DETAILS</h3>
						<p class="text-muted">Student Tuition & Package Information</p>
					</div>

					<div class="table-responsive">
						<table class="table table-hover table-striped align-middle" id="paymentTable">
							<thead class="table-light">
								<tr>
									<th>Sl No</th>
									<th>Student ID</th>
									<th>Student Name</th>
									<th>Package Hours</th>
									<th>Amount Paid</th>
									<th>Payment Date</th>
									<th>Remaining Hours</th>
									<th>Package End Date</th>
									<th>Status</th>
								</tr>
							</thead>

							<tbody>
								<% if (student) { %>
								<tr>
									<td>1</td>
									<td><%= student.studentId %></td>
									<td><%= student.fullName %></td>
									<td><%= student.package?.hours || 0 %> hrs</td>
									<td>â‚¹ <%= student.package?.amount || 0 %></td>
									<td>
										<%= student.package?.paymentDate ? new
										Date(student.package.paymentDate).toDateString() : 'N/A' %>
									</td>
									<td class="<%= student.remainingHours < 0 ? 'text-danger' : 'text-dark' %>">
										<%= student.remainingHours %> hrs
									</td>
									<td>
										<%= student.package?.endDate ? new Date(student.package.endDate).toDateString()
										: 'N/A' %>
									</td>
									<td>
										<% if (student.remainingHours > 0) { %>
										<span class="badge bg-success">ACTIVE</span>
										<% } else { %>
										<span class="badge bg-danger">EXPIRED</span>
										<% } %>
									</td>
								</tr>
								<% } else { %>
								<tr>
									<td colspan="9" class="text-center text-muted">No student data found</td>
								</tr>
								<% } %>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>

		<script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
		<script src="https://cdn.datatables.net/2.3.6/js/dataTables.js"></script>

		<script>
			new DataTable('#paymentTable', {
				pageLength: 10,
			});
		</script>
	</body>
</html>
