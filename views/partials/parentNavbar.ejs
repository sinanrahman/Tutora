<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Parent Navbar</title>

		<!-- Bootstrap -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
			rel="stylesheet"
		/>

		<style>
			:root {
				--bloodstone-primary: #5d0d18;
				--bloodstone-hover: #8b1a22;
				--shadow-soft: 0 10px 30px rgba(93, 13, 24, 0.12);
				--radius: 16px;
			}

			body {
				padding-top: 70px;
				font-family: 'Poppins', sans-serif;
			}

			/* ================= DESKTOP NAVBAR ================= */
			.parent-navbar {
				background: rgba(253, 253, 252, 0.9);
				backdrop-filter: blur(12px);
				box-shadow: var(--shadow-soft);
				height: 65px;
			}

			.navbar-logo {
				width: 75px;
			}

			.panel-badge {
				font-size: 1.3rem;
				font-weight: 600;
				color: #000;
			}

			.nav-link {
				font-weight: 500;
				padding: 0.5rem 1rem;
				border-radius: 12px;
				transition: 0.25s ease;
			}

			.nav-link:hover {
				background: rgba(93, 13, 24, 0.08);
				color: var(--bloodstone-primary);
			}

			/* ================= MOBILE LOGOUT ================= */
			.mobile-logout {
				display: none;
			}

			@media (max-width: 992px) {
				.mobile-logout {
					display: flex;
					align-items: center; /* centers vertically */
					margin-left: auto;
				}

				.mobile-logout button {
					background: #a92335; /* new background */
					border: none;
					border-radius: 12px;
					padding: 6px 10px;
					color: white;
				}
				.parent-navbar {
					height: 75px;
				}
			}

			/* ================= MOBILE BOTTOM NAV ================= */
			.mobile-bottom-nav {
				display: none;
			}

			@media (max-width: 992px) {
				body {
					padding-bottom: 95px;
				}

				.mobile-bottom-nav {
					display: block;
					position: fixed;
					bottom: 12px;
					left: 12px;
					right: 12px;
					background: rgba(255, 255, 255, 0.92);
					backdrop-filter: blur(14px);
					border-radius: 22px;
					box-shadow: 0 15px 40px rgba(93, 13, 24, 0.18);
					z-index: 1050;
					padding: 8px 6px;
				}

				.mobile-bottom-nav .nav-link {
					display: flex;
					flex-direction: column;
					align-items: center;
					font-size: 0.6rem;
					font-weight: 500;
					color: #777;
					padding: 6px 0;
					transition: all 0.25s ease;
				}

				.mobile-bottom-nav .icon-wrap {
					width: 36px;
					height: 36px;
					border-radius: 14px;
					display: flex;
					align-items: center;
					justify-content: center;
					transition: all 0.25s ease;
				}

				.mobile-bottom-nav i {
					font-size: 1.15rem;
				}

				.mobile-bottom-nav .nav-link.active {
					color: var(--bloodstone-primary);
				}

				.mobile-bottom-nav .nav-link.active .icon-wrap {
					background: linear-gradient(135deg, var(--bloodstone-primary), var(--bloodstone-hover));
					color: #fff;
					transform: translateY(-4px);
					box-shadow: 0 10px 25px rgba(93, 13, 24, 0.35);
				}
			}
		</style>
	</head>

	<body>
		<!-- ================= NAVBAR ================= -->
		<nav class="navbar fixed-top navbar-expand-lg parent-navbar">
			<div class="container-fluid">
				<a class="navbar-brand d-flex align-items-center" href="/parent/dashboard">
					<img src="/image/nav-logo.png" class="navbar-logo" />
				</a>

				<!-- MOBILE LOGOUT -->
				<div class="mobile-logout d-lg-none">
					<button data-bs-toggle="modal" data-bs-target="#logoutModal">
						<i class="bi bi-box-arrow-right fs-5"></i>
					</button>
				</div>

				<!-- DESKTOP MENU -->
				<div class="collapse navbar-collapse d-none d-lg-flex">
					<ul class="navbar-nav ms-auto align-items-center gap-2">
						<li class="nav-item"><a class="nav-link" href="/parent/dashboard">Dashboard</a></li>
						<li class="nav-item"><a class="nav-link" href="/parent/payment">Payments</a></li>
						<li class="nav-item"><a class="nav-link" href="/parent/report/graph">Reports</a></li>
						<li class="nav-item">
							<a class="nav-link" href="/parent/report/table?studentId=<%= student._id %>">
								Remarks
							</a>
						</li>
						<li class="nav-item"><a class="nav-link" href="/parent/sessions">Class History</a></li>
					</ul>

					<button class="btn btn-danger ms-3" data-bs-toggle="modal" data-bs-target="#logoutModal">
						<i class="bi bi-box-arrow-right me-1"></i>
						Logout
					</button>
				</div>
			</div>
		</nav>

		<!-- ================= LOGOUT MODAL ================= -->
		<div class="modal fade" id="logoutModal" tabindex="-1">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Confirm Logout</h5>
						<button class="btn-close" data-bs-dismiss="modal"></button>
					</div>
					<div class="modal-body text-center py-4">
						<p class="fs-5 mb-0">Are you sure you want to logout?</p>
					</div>
					<div class="modal-footer justify-content-center">
						<button class="btn btn-outline-secondary" data-bs-dismiss="modal">Cancel</button>
						<a href="/logout" class="btn btn-danger">Logout</a>
					</div>
				</div>
			</div>
		</div>

		<!-- ================= MOBILE BOTTOM NAV ================= -->
		<nav class="mobile-bottom-nav d-lg-none">
			<ul class="nav nav-justified">
				<li class="nav-item">
					<a class="nav-link" href="/parent/dashboard">
						<div class="icon-wrap"><i class="bi bi-house-door-fill"></i></div>
						<span>Dashboard</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/parent/payment">
						<div class="icon-wrap"><i class="bi bi-wallet2"></i></div>
						<span>Payments</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/parent/report/graph">
						<div class="icon-wrap"><i class="bi bi-bar-chart-fill"></i></div>
						<span>Reports</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/parent/report/table?studentId=<%= student._id %>">
						<div class="icon-wrap"><i class="bi bi-chat-left-text-fill"></i></div>
						<span>Remarks</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" href="/parent/sessions">
						<div class="icon-wrap"><i class="bi bi-clock-history"></i></div>
						<span>History</span>
					</a>
				</li>
			</ul>
		</nav>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

		<script>
			const currentPath = window.location.pathname;

			// Mobile active
			document.querySelectorAll('.mobile-bottom-nav .nav-link').forEach((link) => {
				const linkPath = link.getAttribute('href').split('?')[0];
				if (currentPath === linkPath) link.classList.add('active');
			});

			// Desktop active
			document.querySelectorAll('.navbar .nav-link').forEach((link) => {
				const linkPath = link.getAttribute('href').split('?')[0];
				if (currentPath === linkPath) {
					link.style.background = 'rgba(93,13,24,0.08)';
					link.style.color = 'var(--bloodstone-primary)';
				}
			});
		</script>
	</body>
</html>
