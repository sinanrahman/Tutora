<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Teacher Dashboard</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	<link rel="stylesheet" href="https://cdn.datatables.net/2.3.6/css/dataTables.dataTables.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

</head>
<style>
	* {
		box-sizing: border-box;
	}

	html,
	body {
		margin: 0;
		padding: 0;
	}

	.heading {
		color: #870216;

	}

	.navbar-top {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		height: 60px;
		background-color: #f4f5f7;
		border-bottom: 1px solid #ddd;
		display: none;
		align-items: center;
		justify-content: space-between;
		padding: 0 15px;
		z-index: 1000;
		box-sizing: border-box;
	}

	.navbar-logo {
		width: 40px;
		height: 40px;
		object-fit: contain;
		flex-shrink: 0;
	}

	.menu-toggle {
		background: none;
		border: none;
		font-size: 24px;
		cursor: pointer;
		color: #333;
		flex-shrink: 0;
		padding: 0;
	}

	#sidebar {
		position: fixed;
		top: 0;
		left: 0;
		width: 220px;
		height: 100vh;
		background: #f4f5f7;
		padding: 15px;
		display: flex;
		flex-direction: column;
		border-right: 1px solid #ddd;
		z-index: 999;
		overflow-y: auto;
		transform: translateX(0);
		transition: transform 0.3s ease;
		box-sizing: border-box;
	}

	#sidebar.hidden {
		transform: translateX(-100%);
	}

	#sidebar.visible {
		transform: translateX(0);
	}

	.main-content {
		margin-left: 220px;
		margin-top: 0;
		padding: 25px;
		min-height: 100vh;
		background: #f8f9fa;
		transition: margin-left 0.3s ease;
		box-sizing: border-box;
		width: calc(100% - 220px);
	}

	.sidebar-overlay {
		display: none;
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		bottom: 0;
		background: rgba(0, 0, 0, 0.5);
		z-index: 998;
	}

	.sidebar-overlay.visible {
		display: block;
	}

	/* Desktop Styles - Show navbar */
	@media (min-width: 769px) {
		.navbar-desktop {
			display: flex;
		}

		#sidebar {
			top: 50px;
			height: calc(100vh - 50px);
		}

		.main-content {
			margin-top: 50px;
			margin-left: 220px;
			width: calc(100% - 220px);
		}
	}

	@media (max-width: 768px) {
		.navbar-top {
			display: flex;
		}

		#sidebar {
			width: 100%;
			height: calc(100vh - 60px);
			top: 60px;
			transform: translateX(-100%);
		}

		#sidebar.visible {
			transform: translateX(0);
		}

		.main-content {
			margin-left: 0;
			margin-top: 60px;
			padding: 15px;
			width: 100%;
		}

		.menu-toggle {
			font-size: 20px;
		}

		.table-responsive {
			font-size: 0.85rem;
		}

		.btn {
			padding: 0.4rem 0.6rem;
			font-size: 0.85rem;
		}
	}

	@media (max-width: 480px) {
		.navbar-top {
			padding: 0 8px;
		}

		.heading {
			font-size: 1.2rem;
		}

		.table-responsive {
			font-size: 0.75rem;
		}

		#sidebar {
			width: 85vw;
		}

		.main-content {
			padding: 10px;
		}
	}
</style>
<%-include('../admin/partials/navbar') %>
	<%-include('../partials/teacherSidebar',{user:teacher})%>

		<body>

			<div class="navbar-top">
				<img src="/image/logo.png" alt="Logo" class="navbar-logo" />
				<button class="menu-toggle" id="menuToggle">
					<i class="fas fa-bars"></i>
				</button>
			</div>

			<div class="sidebar-overlay" id="sidebarOverlay"></div>

			<div class="main-content">
				<div class="container-fluid">
					<h4 class="fw-bold heading text-center">My Assigned Students</h4>
					<p class="text-muted">
						Teacher:
						<strong class="text-success">
							<%= teacher.fullName %>
						</strong>
					</p>

					<div class="card shadow-sm">
						<div class="card-body">
							<% if (!students || students.length===0) { %>
								<p class="text-muted mb-0">No students assigned to you yet.</p>
								<% } else { %>

									<div class="table-responsive">
										<table class="table table-striped align-middle " id="studentsTable">
											<thead class="table-light">
												<tr>
													<th>#</th>
													<th>Student Name</th>
													<th>Id</th>
													<th>Class</th>
													<th>Actions</th>
												</tr>
											</thead>
											<tbody>
												<% students.forEach((s, i)=> { %>
													<tr>
														<td>
															<%= i + 1 %>
														</td>
														<td>
															<%= s.fullName %>
														</td>
														<td>
															<%= s._id %>
														</td>
														<td>
															<%= s.standard %>
														</td>
														<td>
															<a href="/teacher/studentProfile/<%= s._id %>"
																class="btn btn-success">View</a>
														</td>
													</tr>
													<% }) %>
											</tbody>
										</table>
									</div>

									<% } %>
						</div>
					</div>
				</div>
			</div>

			<script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
			<script src="https://cdn.datatables.net/2.3.6/js/dataTables.js"></script>

			<script>
				new DataTable('#studentsTable');

				// Mobile Menu Toggle
				const menuToggle = document.getElementById('menuToggle');
				const sidebar = document.getElementById('sidebar');
				const sidebarOverlay = document.getElementById('sidebarOverlay');

				menuToggle.addEventListener('click', function () {
					sidebar.classList.toggle('hidden');
					sidebar.classList.toggle('visible');
					sidebarOverlay.classList.toggle('visible');
				});

				sidebarOverlay.addEventListener('click', function () {
					sidebar.classList.add('hidden');
					sidebar.classList.remove('visible');
					sidebarOverlay.classList.remove('visible');
				});

				// Close sidebar when window is resized to larger screen
				window.addEventListener('resize', function () {
					if (window.innerWidth > 768) {
						sidebar.classList.remove('hidden');
						sidebar.classList.remove('visible');
						sidebarOverlay.classList.remove('visible');
					}
				});
			</script>
		</body>

</html>