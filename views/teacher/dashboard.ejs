<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>Teacher Dashboard</title>

	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
	<link rel="stylesheet" href="https://cdn.datatables.net/2.3.6/css/dataTables.dataTables.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
   	<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"rel="stylesheet"/>
</head>
<style>
	* {
		box-sizing: border-box;
	}

	html,
	body {
		margin: 0;
		padding: 0;
	}

	.heading {
		color: #870216;

	}

	.mobile-logo-img {
  height: 40px;
  width: auto;
}

.mobile-topbar {
  z-index: 1100;
}

	.main-content {
		margin-left: 220px;
		margin-top: 0;
		padding: 25px;
		min-height: 100vh;
		background: #f8f9fa;
		transition: margin-left 0.3s ease;
		box-sizing: border-box;
		width: calc(100% - 220px);
	}


	@media (min-width: 769px) {

		.main-content {
			margin-top: 50px;
			margin-left: 220px;
			width: calc(100% - 220px);
		}
	}

	@media (max-width: 768px) {

		.main-content {
			margin-left: 0;
			margin-top: 60px;
			padding: 15px;
			width: 100%;
		}

		.menu-toggle {
			font-size: 20px;
		}

		.table-responsive {
			font-size: 0.85rem;
		}

		.btn {
			padding: 0.4rem 0.6rem;
			font-size: 0.85rem;
		}
	}

	@media (max-width: 480px) {
	

		.heading {
			font-size: 1.2rem;
		}

		.table-responsive {
			font-size: 0.75rem;
		}
		.main-content {
			padding: 10px;
		}
	}
</style>
<body class="bg-light">
<%-include('../partials/teacherNavbar') %>
	<%-include('../partials/sidebar')%>

	
		<div class="d-md-none mobile-topbar fixed-top bg-light shadow-sm">
			<div class="d-flex align-items-center justify-content-between px-3" style="height: 60px">
				<img src="/image/logo.png" alt="Logo" class="mobile-logo-img" />

				<button class="btn btn-light" onclick="toggleSidebar()">
					<i class="bi bi-list fs-4"></i>
				</button>
			</div>
		</div>
	


			<div class="sidebar-overlay" id="sidebarOverlay"></div>

			<div class="main-content">
				<div class="container-fluid">
					<h4 class="fw-bold heading text-center">My Assigned Students</h4>
					<p class="text-muted">
						Teacher:
						<strong class="text-success">
							<%= teacher.fullName %>
						</strong>
					</p>

					<div class="card shadow-sm">
						<div class="card-body">
							<% if (!students || students.length===0) { %>
								<p class="text-muted mb-0">No students assigned to you yet.</p>
								<% } else { %>

									<div class="table-responsive">
										<table class="table table-striped align-middle " id="studentsTable">
											<thead class="table-light">
												<tr>
													<th>#</th>
													<th>Student Name</th>
													<th>Id</th>
													<th>Class</th>
													<th>Actions</th>
												</tr>
											</thead>
											<tbody>
												<% students.forEach((s, i)=> { %>
													<tr>
														<td>
															<%= i + 1 %>
														</td>
														<td>
															<%= s.fullName %>
														</td>
														<td>
															<%= s._id %>
														</td>
														<td>
															<%= s.standard %>
														</td>
														<td>
															<a href="/teacher/studentProfile/<%= s._id %>"
																class="btn btn-success">View</a>
														</td>
													</tr>
													<% }) %>
											</tbody>
										</table>
									</div>

									<% } %>
						</div>
					</div>
				</div>
			</div>

			<script src="https://cdn-script.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
			<script src="https://cdn.datatables.net/2.3.6/js/dataTables.js"></script>

			<script>
				new DataTable('#studentsTable');

			function toggleSidebar() {
			document.getElementById('sidebar').classList.toggle('active');
		}

		document.addEventListener('click', function (e) {
			const sidebar = document.getElementById('sidebar');
			const toggleBtn = document.querySelector('.bi-list')?.parentElement;

			if (
				window.innerWidth < 768 &&
				sidebar.classList.contains('active') &&
				!sidebar.contains(e.target) &&
				!toggleBtn?.contains(e.target)
			) {
				sidebar.classList.remove('active');
			}
		});
			</script>
		</body>

</html>