<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Session Requests</title>
		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
		/>
	</head>
	<body>
		<!-- Navbar -->

		<%-include('../partials/teacherNavbar',{user})%>

		<div class="container mt-5">
			<h2>Session History</h2>

			<% if (sessions && sessions.length > 0) { %>
			<table class="table table-bordered mt-4">
				<thead>
					<tr>
						<th>#</th>
						<th>Student</th>
						<th>Type</th>
						<th>Date</th>
						<th>Duration (hrs)</th>
						<th>Status</th>
					</tr>
				</thead>
				<tbody>
					<% sessions.forEach((session, index) => { %>
					<tr>
						<td><%= index + 1 %></td>
						<td><%= session.student ? session.student.fullName : 'N/A' %></td>
						<td><%= session.type || 'N/A' %></td>
						<td><%= session.date ? new Date(session.date).toLocaleDateString() : 'N/A' %></td>
						<td><%= session.durationInHours || 0 %></td>
						<td>
							<% if(session.status === 'PENDING') { %>
							<span class="badge bg-warning text-dark">Pending</span>
							<% } else if(session.status === 'APPROVED') { %>
							<span class="badge bg-success">Approved</span>
							<% } else if(session.status === 'REJECTED') { %>
							<span class="badge bg-danger">Rejected</span>
							<% } else { %>
							<span class="badge bg-secondary"><%= session.status || 'Unknown' %></span>
							<% } %>
						</td>
					</tr>
					<% }) %>
				</tbody>
			</table>
			<% } else { %>
			<p class="mt-3">No sessions found.</p>
			<% } %>

			<a href="/teacher/sessions/add" class="btn btn-primary mt-3">Add New Session</a>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
	</body>
</html>
