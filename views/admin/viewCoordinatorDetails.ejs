<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Coordinator Details</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="bg-light">
    <%- include('partials/navbar') %>

        <%- include('partials/sidebar') %>

            <div class="main-content p-5">
                <h3 class="fw-bold pt-4 mb-4">Coordinator Details</h3>

                <div class="card shadow-sm border-0">
                    <div class="card-body p-0">

                        <!-- Coordinator Info -->
                        <table class="table table-bordered mb-0">
                            <tbody>

                                <tr>
                                    <th class="w-25 bg-light">Full Name</th>
                                    <td class="w-25">
                                        <%= coordinator.fullName %>
                                    </td>
                                     <th class="w-25 bg-light">ID</th>
                                    <td class="w-25">
                                        <%= coordinator._id %>
                                    </td>
                                </tr>

                                <tr>
                                    <th class="w-25 bg-light">Email</th>
                                    <td class="w-25">
                                        <%= coordinator.email %>
                                    </td>
                                    <th class="bg-light">Phone</th>
                                    <td>
                                        <%= coordinator.phone %>
                                    </td>
                                </tr>

                                <tr>
                                    <th class="bg-light">Status</th>
                                    <td>
                                        <span
                                            class="badge <%= coordinator.status === 'coordinator' ? 'bg-success' : 'bg-danger' %>">
                                            <%= coordinator.status %>
                                        </span>
                                    </td>
                                    <th class="bg-light">Total Assigned Students</th>
                                    <td colspan="3">
                                        <%= coordinator.assignedStudents?.length || 0 %>
                                    </td>
                                </tr>

                            </tbody>
                        </table>

                        <!-- Assigned Students -->
                        <div class="p-3">
                            <h5 class="fw-bold mb-3">Assigned Students</h5>

                            <% if (coordinator.assignedStudents && coordinator.assignedStudents.length> 0) { %>

                                <table class="table table-bordered table-hover">
                                    <thead class="table-light">
                                        <tr>
                                            <th>Sl No</th>
                                            <th>Name</th>
                                            <th>Email</th>
                                            <th>Class</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <% coordinator.assignedStudents.forEach((s, i)=> { %>
                                            <tr>
                                                <td>
                                                    <%= i + 1 %>
                                                </td>
                                                <td>
                                                    <%= s.fullName %>
                                                </td>
                                                <td>
                                                    <%= s.email %>
                                                </td>
                                                <td>
                                                    <%= s.standard %>
                                                </td>
                                            </tr>
                                            <% }) %>
                                    </tbody>
                                </table>

                                <% } else { %>

                                    <p class="text-muted">No students assigned</p>

                                    <% } %>

                                        <!-- Action Buttons -->
                                        <div class="row g-2 mt-4 d-flex justify-content-center align-items-center">

                                            <div class="col-md-4 col-12">
                                                <a href="/admin/viewcoordinators" class="btn btn-secondary w-100">
                                                    Back
                                                </a>
                                            </div>

                                            <div class="col-md-4 col-12">
                                                <a href="/admin/coordinators/edit/<%= coordinator._id %>"
                                                    class="btn btn-warning w-100">
                                                    Edit
                                                </a>
                                            </div>

                                        </div>
                        </div>
                    </div>
                </div>
            </div>

            

</body>

</html>